!function(e){function t(e){try{var r=s.dirname(e);return c.existsSync(r)||t(r),c.existsSync(e)||c.mkdirSync(e),!0}catch(n){}}function r(e,r,n){"function"==typeof r&&(n=r,r=""),r=s.join(l,r);var i=u.parse(e),o=s.basename(i.pathname),d=s.join(r,o);if(c.existsSync(d))n&&n(d);else{t(r);var h=c.createWriteStream(d);a(e).pipe(h),h.on("finish",function(){n&&n(d)})}}function r(e,t,r){"function"==typeof t&&(r=t,t=""),r&&r(e)}function n(e){var t=new Date,r=t.format("yyyyMMdd");e+=(~e.indexOf("?")?"&":"?")+"date="+r+"&appid="+y;var n=h.createHmac("sha1",v);n.write(e),n.end();var i=n.read().toString("base64");return i=encodeURIComponent(i),e.replace(/appid=.*/,"appid="+y.substr(0,6))+"&key="+i}function i(e){if(e=$.extend(!0,{percent:.2,circleOuter:{width:6,color:"#ccc"},circlePercent:{width:6,color:"red"},animate:!0},e),!e.container)throw new Error("no container!");var t=$(e.container),r=t.width(),n=t.height(),i=Math.min(r,n),o=i/2,a=$('<div style="position:relative;width:100%;height:100%;"><canvas width="'+i+'" height="'+i+'" style="position:absolute;left:50%;top:50%;margin-left:'+-o+"px;margin-top:"+-o+'px;"></canvas></div>');a.appendTo(t);var c=a.find("canvas"),s=c.get(0).getContext("2d");this.ctx=s,this.option=e;var u=e.percent;this.setPercent(u)}if(is_native){var o=require.extensions;o[".gts"]=o[".js"];var a=require("request"),c=require("fs"),s=require("path"),u=require("url"),d=require("os"),h=require("crypto"),l=s.join(d.tmpDir(),"cwtv"),p=require("remote"),f=p.require("dialog"),g=p.getCurrentWindow();alert=function(e){f.showMessageBox(g,{type:"info",buttons:["yes"],title:"\u7cfb\u7edf\u63d0\u793a",message:e,icon:null})}}r.video=function(e,t){r(e,"video",t)},Date.prototype.format=Date.prototype.format||function(e,t){e||(e="yyyy-MM-dd hh:mm:ss");var r={"M{2}":this.getMonth()+1,"d{2}":this.getDate(),"h{2}":this.getHours(),"m{2}":this.getMinutes(),"q{2}":Math.floor((this.getMonth()+3)/3)};t||(r["s{2}"]=this.getSeconds(),r["S{2}"]=this.getMilliseconds()),/(y{4}|y{2})/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in r)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return e};var v="lanpai",y="fx8fj7ycj8fhbgdt",m=function(){var e,t={},r=function(r,n,i){"function"==typeof n&&(i=n,n=null),n=$.extend(!0,{type:"json",unique:!0,loading:!0,dealError:!0},n),n.unique&&(e=r);var o=t[r];if(o){var a=$.Deferred();return a.resolve([o]),i&&i(null,o),a}n.loading&&w.req();var c="json"==n.type;return $[c?"getJSON":"get"](r,function(n){if(c&&"string"==typeof n)try{n=$.parseJSON(n)}catch(o){}t[r]=n,e==r?(w.hide(),i&&i(null,n)):console.log(e,r)}).error(function(e,t,r){w.hide(),n.dealError&&alert("\u6570\u636e\u8bf7\u6c42\u51fa\u73b0\u9519\u8bef\uff01"),i&&i(r)})};return r.text=function(e,t){return r(e,{type:"text"},t)},r}(),x=Math.PI,q=-x/2;i.prototype.setPercent=function(){function e(){t.beginPath();var r=f+v;t.arc(c,c,l,f,r,!0),t.stroke(),f=r,f>g&&requestAnimationFrame(e)}var t=this.ctx,r=this.option,n=$(r.container),i=n.width(),o=n.height(),a=Math.min(i,o),c=a/2;t.clearRect(0,0,i,o),t.save(),t.beginPath();var s=r.circleOuter.width,u=c-s;t.lineWidth=s,t.strokeStyle=r.circleOuter.color,t.arc(c,c,u,q,2*x+q),t.stroke();var d=2*-r.percent*x;if(0!=d){t.restore();var h=r.circlePercent.width,l=c-h-(s-h);t.lineWidth=h,t.strokeStyle=r.circlePercent.color;var p=r.animate,f=q,g=q+d,v=-x/180*10;p||(v=-Math.abs(g-f)),setTimeout(e,500*Math.random())}};var w=function(){var e,t=function(t){e||(e=$("<div>").addClass("loading_tip").appendTo("body")),t=t||"\u6b63\u5728\u52a0\u8f7d",e.html('<div class="box">'+t+"</div>").fadeIn()};return t.req=function(){t("\u6b63\u5728\u8bf7\u6c42\u6570\u636e")},t.deal=function(){t("\u6b63\u5728\u5904\u7406")},t.hide=function(){e&&e.hide()},t}();e.Util={download:r,encryURL:n,req:m,UI:{Ring:i},Loading:w}}(this);