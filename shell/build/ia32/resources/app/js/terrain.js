$(function(){function e(){i.show(),n.hide()}var n=Util.Loading,i=$("#terrain_wrap"),r=!1;window.Terrain={init:function(){function t(){l.update(),requestAnimationFrame(t),w.render(d,E)}if(n.deal(),r)e();else{var a=window.innerWidth,o=window.innerHeight,d=new THREE.Scene;d.add(new THREE.AmbientLight(15658734));var E=new THREE.PerspectiveCamera(45,a/o,.1,1e3);E.position.set(0,-30,30);var w=new THREE.WebGLRenderer;w.setSize(a,o);var s=new THREE.TerrainLoader;s.load("./js/3d/jotunheimen.bin",function(n){for(var i=new THREE.PlaneGeometry(60,60,199,199),r=0,t=i.vertices.length;t>r;r++)i.vertices[r].z=n[r]/65535*5;var a=new THREE.MeshPhongMaterial({map:THREE.ImageUtils.loadTexture("./js/3d/jotunheimen-texture.jpg")}),o=new THREE.Mesh(i,a);d.add(o),e()});var l=new THREE.TrackballControls(E,i.get(0));i.append(w.domElement),r=!0,t()}},clear:function(){i.hide()}}});