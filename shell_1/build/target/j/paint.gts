!function(){var t={touch:"createTouch"in document,init:function(t){t.inited||(this.load(t),this.bind(),t.inited=!0)},load:function(t){var e=this;e.x=[],e.y=[],e.clickDrag=[],e.lock=!1,e.isEraser=!1,e.storageColor="#FF0000",e.eraserRadius=15,e.fontWeight=[2,5,8],e.$=function(t){return"string"==typeof t?document.getElementById(t):t},e.canvas=t,e.cxt=e.canvas.getContext("2d"),e.cxt.lineJoin="round",e.cxt.lineWidth=5,e.cxt.strokeStyle=e.storageColor,e.w=e.canvas.width,e.h=e.canvas.height,e.StartEvent=e.touch?"touchstart":"mousedown",e.MoveEvent=e.touch?"touchmove":"mousemove",e.EndEvent=e.touch?"touchend":"mouseup"},bind:function(){var t=this,e=$(t.canvas);e.bind(t.StartEvent,function(e){t.cxt.strokeStyle=t.storageColor,e.originalEvent&&(e=e.originalEvent);var i=t.touch?e.touches[0]:e;t.preventDefault(e);var n=i.clientX-i.target.offsetLeft,o=i.clientY-i.target.offsetTop;t.isEraser?t.resetEraser(n,o,i):(t.movePoint(n,o),t.drawPoint()),t.lock=!0}),e.bind(t.MoveEvent,function(e){e.originalEvent&&(e=e.originalEvent);var i=t.touch?e.touches[0]:e;if(t.lock){var n=i.clientX-i.target.offsetLeft,o=i.clientY-i.target.offsetTop;t.isEraser?t.resetEraser(n,o,i):(t.movePoint(n,o,!0),t.drawPoint())}}),e.bind(t.EndEvent,function(){t.lock=!1,t.x=[],t.y=[],t.clickDrag=[],clearInterval(t.Timer),t.Timer=null})},movePoint:function(t,e){this.x.push(t),this.y.push(e),this.clickDrag.push(e)},drawPoint:function(){for(var t=0;t<this.x.length;t++)this.cxt.beginPath(),this.clickDrag[t]&&t?this.cxt.moveTo(this.x[t-1],this.y[t-1]):this.cxt.moveTo(this.x[t]-1,this.y[t]),this.cxt.lineTo(this.x[t],this.y[t]),this.cxt.closePath(),this.cxt.stroke()},clear:function(){this.cxt&&this.cxt.clearRect(0,0,this.w,this.h)},redraw:function(){this.cxt.restore()},preventDefault:function(t){t.preventDefault?t.preventDefault():window.event.returnValue=!1},getUrl:function(){this.$("html").innerHTML=this.canvas.toDataURL()},resetEraser:function(t,e){var i=this;i.cxt.globalCompositeOperation="destination-out",i.cxt.beginPath(),i.cxt.arc(t,e,i.eraserRadius,0,2*Math.PI),i.cxt.strokeStyle="rgba(250,250,250,0)",i.cxt.fill(),i.cxt.globalCompositeOperation="source-over"}};window.Paint=t}();