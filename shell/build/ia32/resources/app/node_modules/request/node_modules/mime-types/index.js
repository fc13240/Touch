"use strict";function charset(e){if(!e||"string"!=typeof e)return!1;var t=extractTypeRegExp.exec(e),r=t&&db[t[1].toLowerCase()];return r&&r.charset?r.charset:t&&textTypeRegExp.test(t[1])?"UTF-8":!1}function contentType(e){if(!e||"string"!=typeof e)return!1;var t=-1===e.indexOf("/")?exports.lookup(e):e;if(!t)return!1;if(-1===t.indexOf("charset")){var r=exports.charset(t);r&&(t+="; charset="+r.toLowerCase())}return t}function extension(e){if(!e||"string"!=typeof e)return!1;var t=extractTypeRegExp.exec(e),r=t&&exports.extensions[t[1].toLowerCase()];return r&&r.length?r[0]:!1}function lookup(e){if(!e||"string"!=typeof e)return!1;var t=extname("x."+e).toLowerCase().substr(1);return t?exports.types[t]||!1:!1}function populateMaps(e,t){var r=["nginx","apache",void 0,"iana"];Object.keys(db).forEach(function(n){var o=db[n],s=o.extensions;if(s&&s.length){e[n]=s;for(var p=0;p<s.length;p++){var a=s[p];if(t[a]){var i=r.indexOf(db[t[a]].source),x=r.indexOf(o.source);if("application/octet-stream"!==t[a]&&i>x||i===x&&"application/"===t[a].substr(0,12))continue}t[a]=n}}})}var db=require("mime-db"),extname=require("path").extname,extractTypeRegExp=/^\s*([^;\s]*)(?:;|\s|$)/,textTypeRegExp=/^text\//i;exports.charset=charset,exports.charsets={lookup:charset},exports.contentType=contentType,exports.extension=extension,exports.extensions=Object.create(null),exports.lookup=lookup,exports.types=Object.create(null),populateMaps(exports.extensions,exports.types);