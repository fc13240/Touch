$(function(){var i=$(document),n=function(){var i;return function(){return i&&0!=i.length||(i=$(".leaflet-canvas1, .leaflet-canvas2, .leaflet-canvas3")),i}}(),t={show:function(){n().show()},hide:function(){n().hide()}},o=[{name:"\u98ce\u573a",title:"\u5730\u9762\u6d41\u573a\u793a\u610f\u56fe",img:"wind",click:t.show},{name:"\u53f0\u98ce",title:"\u5b9e\u65f6\u53f0\u98ce\u8def\u5f84",img:"typhoon",click:Typhoon.init},{name:"\u96f7\u8fbe",title:"\u5168\u56fd\u96f7\u8fbe\u62fc\u56fe",img:"radar",click:function(){Imgs.init("radar")}},{name:"\u4e91\u56fe",title:"\u4e2d\u56fd\u533a\u57df\u536b\u661f\u4e91\u56fe",img:"cloud",click:function(){Imgs.init("cloud")}},{name:"\u5b9e\u666f\u5929\u6c14",img:"camera",click:function(){Camera.init()}},{name:"\u5929\u6c14\u7edf\u8ba1",title:"\u5b9e\u65f6\u5929\u6c14\u7edf\u8ba1",img:"tongji",click:function(){Micaps.init("tongji")}},{name:"\u5168\u56fd\u973e\u533a\u9884\u62a5",img:"haze",click:function(){Micaps.init("haze")}},{name:"\u5168\u56fd\u96fe\u533a\u9884\u62a5",img:"fog",click:function(){Micaps.init("fog")}},{name:"\u7a7a\u6c14\u8d28\u91cf",title:"\u5168\u56fd\u5b9e\u65f6\u7a7a\u6c14\u8d28\u91cf",img:"aqi",click:function(){Micaps.init("aqi")}},{name:"\u672a\u6765\u4e09\u5929\u964d\u6c34\u91cf\u9884\u62a5",img:"rain",click:function(){Micaps.init("rain3d")}},{name:"\u4e9a\u6b27\u5730\u9762\u573a\u5206\u6790",img:"tqfx",click:function(){Micaps.init("xsc")}}],e=$(".box_title_container"),c=e.find(".time"),a=e.find(".product_name"),l="";$.each(o,function(i,n){var t="<span>"+n.name+"</span>",o=n.img;void 0!==o&&(t='<img src="./img/product/'+o+'.png"/>'),l+='<li data-tip="'+n.name+'">'+t+"</li>"});var r=$(".tool_tip"),s=$(".tool_product_list").html(l);s.find("li").click(function(){t.hide(),Typhoon.clear(),Imgs.clear(),Paint.clear(),Camera.clear(),Micaps.clear(),e.hide(),c.hide(),a.hide(),$(".load_progress_wrap").hide(),$(this).addClass("on").siblings().removeClass("on");var i=$(this).data("name"),n=m[i];n?d.show().find("img").attr("src",n):d.hide();var l=o[$(this).index()];if(l){var r=l.title||l.name;r&&(e.show(),a.text(r).show());var s=l.click;s&&s()}}).on("mouseenter",function(){var i=$(this);r.text(i.data("tip")).css({top:i.position().top+i.height()/2+$("#tool_set_top_wrap").position().top-15}).fadeIn()}).on("mouseleave",function(){r.hide()});var m={wind:"./img/legend_wind.png",radar:"./img/legend_radar.png",typhoon:"./img/legend_typhoon.png"},e=$(".box_title_container"),d=$(".legend"),h=new IScroll("#tool_set_top_wrap",{mouseWheel:!0,click:!0,momentum:!1,snap:"li"});$(".tool_arrow_top").click(function(){h.prev()}),$(".tool_arrow_bottom").click(function(){h.next()}),$(".tool_product_list li").click(function(){console.log($(this).html())});var u=$("#mask"),g=!1,f=!0,p=$("#canvas_brush"),_=$(".tool_brush").click(function(){$(this).toggleClass("on"),g?(Paint.clear(),p.hide()):(v.removeClass("on"),f=!0,p.show(),u.show(),Paint.init(p.get(0))),g=!g}),v=$(".tool_hand").click(function(){f?u.hide():u.show(),$(this).toggleClass("on"),f=!f,g&&_.click()});$(".tool_changemap").click(function(){i.trigger("changemap")}),!function(){function i(){clearTimeout(n),n=setTimeout(function(){p.attr("width",t.innerWidth).attr("height",t.innerHeight)},10)}var n,t=window;$(t).bind("resize",i),i()}(),!function(){var i=function(i){paint.preventDefault(i)};u.bind("touchstart",i),u.bind("touchmove",i),u.bind("touchend",i)}(),!function(){is_native&&$("#btn_close").bind("click",function(){window.close()})}()});