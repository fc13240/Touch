$(function(){W.define("text",["maps"],function(n){function i(){for(var i;i=t.shift();)n.removeLayer(i);for(var e in o){var a=o[e],c=L.divIcon({className:"map_label level_"+n.getZoom(),html:"<span>"+e+"</span>"}),r=L.marker([a[1],a[0]],{icon:c}).addTo(n);t.push(r)}}var o={"\u65b0\u7586":[87.606117,43.790939],"\u897f\u85cf":[91.13205,29.657589],"\u5185\u8499\u53e4":[111.6633,40.820942],"\u9752\u6d77":[101.787453,36.609447],"\u56db\u5ddd":[104.081757,30.661057],"\u9ed1\u9f99\u6c5f":[126.643341,45.741493],"\u7518\u8083":[103.750053,36.068039],"\u4e91\u5357":[102.704567,25.043844],"\u5e7f\u897f":[108.311768,22.806543],"\u6e56\u5357":[112.98127,28.200825],"\u9655\u897f":[108.949028,34.261684],"\u5e7f\u4e1c":[113.261429,23.118912],"\u5409\u6797":[125.31543,43.892563],"\u6cb3\u5317":[114.489777,38.045128],"\u6e56\u5317":[114.291939,30.567514],"\u8d35\u5dde":[106.711372,26.576874],"\u5c71\u4e1c":[117.0056,36.667072],"\u6c5f\u897f":[115.899918,28.675991],"\u6cb3\u5357":[113.650047,34.757034],"\u8fbd\u5b81":[123.411682,41.796616],"\u5c71\u897f":[112.569351,37.871113],"\u5b89\u5fbd":[117.275703,31.863255],"\u798f\u5efa":[119.297813,26.07859],"\u6d59\u6c5f":[120.159248,30.265995],"\u6c5f\u82cf":[118.772781,32.047615],"\u91cd\u5e86":[106.510338,29.558176],"\u5b81\u590f":[106.271942,38.46801],"\u6d77\u5357":[110.346512,20.031794],"\u53f0\u6e7e":[121.514282,25.049128],"\u5317\u4eac":[116.380943,39.923615],"\u5929\u6d25":[117.203499,39.131119],"\u4e0a\u6d77":[121.469269,31.238176],"\u9999\u6e2f":[114.154404,22.280685],"\u6fb3\u95e8":[113.550056,22.200796]},t=[];i(),n.on("zoomend",function(){i()})});var n=function(){var n;return function(){return n&&0!=n.length||(n=$(".leaflet-canvas1, .leaflet-canvas2, .leaflet-canvas3")),n}}(),i={show:function(){n().show()},hide:function(){n().hide()}},o={wind:"./img/legend_wind.png",radar:"./img/legend_radar.png",typhoon:"./img/legend_typhoon.png"},t="./img/title_",e={wind:t+"wind.png",radar:t+"radar.png",cloud:t+"cloud.png",typhoon:""},a=$(".box_title_container"),c=$(".legend");$(".tool_btn_pro").click(function(){i.hide(),Typhoon.clear(),Imgs.remove(),Paint.clear(),$(".load_progress_wrap").hide(),$(this).addClass("on").siblings().removeClass("on");var n=$(this).data("name"),t=e[n];t?(a.show(),a.find("img").attr("src",t)):a.hide(),a.find(".time").hide();var r=o[n];r?c.show().find("img").attr("src",r):c.hide()});var r=$(".box_tool");r.find(".tool_wind").click(i.show),r.find(".tool_typhoon").click(function(){Typhoon.init()}),r.find(".tool_radar").click(function(){Imgs.init("radar")}),r.find(".tool_cloud").click(function(){Imgs.init("cloud")});var d=$("#mask"),l=!1,s=!0,h=$("#canvas_brush"),f=r.find(".tool_brush").click(function(){$(this).toggleClass("on"),l?(Paint.clear(),h.hide()):(u.removeClass("on"),s=!0,h.show(),d.show(),Paint.init(h.get(0))),l=!l}),u=r.find(".tool_hand").click(function(){s?d.hide():d.show(),$(this).toggleClass("on"),s=!s,l&&f.click()});!function(){function n(){clearTimeout(i),i=setTimeout(function(){h.attr("width",o.innerWidth).attr("height",o.innerHeight)},10)}var i,o=window;$(o).bind("resize",n),n()}(),!function(){var n=function(n){paint.preventDefault(n)};d.bind("touchstart",n),d.bind("touchmove",n),d.bind("touchend",n)}(),!function(){if(is_native){var n=nwDispatcher.requireNwGui().Window.get();$("#btn_close").bind("click",function(){n.close()})}}()});